# =============================================================================
# TaskManager Environment Configuration
# =============================================================================
# Copy this file to .env and update with your values

# =============================================================================
# Security Configuration
# =============================================================================
# REQUIRED in production: Generate a secure random secret key for JWT signing
# Example: python -c "import secrets; print(secrets.token_hex(32))"
# WARNING: Never use the default value in production - the application will fail to start
SECRET_KEY=change-me-in-production

# =============================================================================
# Database Configuration
# =============================================================================
POSTGRES_DB=taskmanager
POSTGRES_USER=taskmanager
POSTGRES_PASSWORD=your_secure_password_here
POSTGRES_HOST=localhost

# =============================================================================
# Domain Configuration
# =============================================================================
ROOT_DOMAIN=yourdomain.com
FRONTEND_URL=https://yourdomain.com

# =============================================================================
# Development Settings
# =============================================================================
# NODE_ENV=development

# =============================================================================
# MCP Server Configuration
# =============================================================================
# OAuth client credentials for MCP servers to authenticate with TaskManager
# Register an OAuth client in TaskManager with redirect URI:
# https://your-mcp-auth-server.com/oauth/callback
TASKMANAGER_CLIENT_ID=your_oauth_client_id
TASKMANAGER_CLIENT_SECRET=your_oauth_client_secret

# API key for MCP Resource Server to access TaskManager API
# Generate an API key in TaskManager Settings > API Keys
# Format: tm_<48 hex characters>
TASKMANAGER_API_KEY=your_api_key_here

# Internal service URLs (for Docker networking)
MCP_AUTH_SERVER=http://mcp-auth:9000
TASKMANAGER_OAUTH_HOST=http://backend:8000

# Public URLs (used for OAuth redirects and metadata)
# Update these with your actual domain names
MCP_AUTH_SERVER_PUBLIC_URL=https://mcp-auth.yourdomain.com
MCP_SERVER_URL=https://mcp.yourdomain.com

# Database URL for persistent MCP token storage (optional)
# Uses the same database as TaskManager
# DATABASE_URL=postgresql://taskmanager:password@postgres:5432/taskmanager

# CORS allowed origins for MCP OAuth discovery endpoints (comma-separated)
# Leave empty to block all CORS requests for security
# Example: ALLOWED_MCP_ORIGINS=https://claude.ai,https://app.example.com
ALLOWED_MCP_ORIGINS=

# Debug mode for MCP resource server (default: false)
# IMPORTANT: Set to false in production to prevent information leakage
DEBUG=false

# =============================================================================
# File Upload Configuration
# =============================================================================
# Directory for storing uploaded files (relative to backend service)
UPLOAD_DIR=./uploads

# Maximum file upload size in megabytes
MAX_UPLOAD_SIZE_MB=10

# Allowed image MIME types (comma-separated)
ALLOWED_IMAGE_TYPES=image/jpeg,image/png,image/gif,image/webp

# =============================================================================
# GitHub OAuth Configuration (Social Login)
# =============================================================================
# Create a GitHub OAuth App at: https://github.com/settings/developers
# Set the callback URL to: https://yourdomain.com/api/auth/github/callback
# Leave empty to disable GitHub sign-in

GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=

# Optional: Override the redirect URI (defaults to {FRONTEND_URL}/oauth/github/callback)
# GITHUB_OAUTH_REDIRECT_URI=https://yourdomain.com/api/auth/github/callback

# =============================================================================
# Monitoring (Grafana)
# =============================================================================
# Admin credentials for the Grafana dashboard (used by docker-compose.yml)
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin

# =============================================================================
# Lakera Guard Security Configuration
# =============================================================================
# Get your API key from https://platform.lakera.ai
LAKERA_GUARD_API_KEY=your_lakera_api_key_here

# Enable/disable Lakera Guard security screening (default: false)
LAKERA_GUARD_ENABLED=false

# Lakera Guard API endpoint (optional, defaults to https://api.lakera.ai/v2/guard)
# LAKERA_GUARD_API_URL=https://api.lakera.ai/v2/guard
